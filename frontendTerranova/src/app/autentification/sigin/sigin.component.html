
<app-background></app-background>
<h2>Sign In</h2>
<br>
<form (ngSubmit)="submitForm()">
  <p>Nome*: <input type="text" [(ngModel)]="user.name" name="name" required /></p>
<app-username [user]="user" (userSelected)="usernameAvailable = $event"></app-username>
  <p>Password*: <input type="password" [(ngModel)]="user.password" name="password" required></p>
  <p>
    Email*: 
   <input 
      type="email" 
      placeholder="Inserisci la tua email" 
      [(ngModel)]="user.email" 
      name="email" 
      required 
      (input)="validateEmail()" 
      #emailInput="ngModel" 
    />
    <span *ngIf="emailInput.invalid && emailInput.touched" style="color: red;">
      Inserisci un'email valida.
    </span>
    <span *ngIf="emailErrorMessage" style="color: red;">
      {{ emailErrorMessage }}
    </span>
  </p>
  <app-age (DateSelected)="user.birthDate = $event"></app-age>
  <app-country (countrySelected)="user.country = $event"></app-country>
  <p>Città: <input type="text" [(ngModel)]="user.city" name="city"></p>
  
  <label for="imgUpload">Upload Image:</label>
  <input type="file" id="imgUpload" (change)="onFileSelected($event)" accept="image/*" />
  
  <!-- <img *ngIf="user.imgUrl" [src]="user.imgUrl" alt="Uploaded Image" /> -->

  
  <div class="inline-container">
    Accetta Termini
	<app-slide-button [(isActive)]="user.appPermissions" > </app-slide-button>
</div>
  <div class="inline-container">
    Modalità senza alcool
	<app-slide-button [(isActive)]="user.canDrinkAlcohol" ></app-slide-button>
  </div>
  
  <button type="submit" [disabled]="!formValid()">Invia</button>
</form>